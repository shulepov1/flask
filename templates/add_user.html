{% extends 'base.html' %}

{% block content %}

{% for message in get_flashed_messages() %}
<div class="alert alert-success alert-dismissible fade show" role="alert">
    {{message}}
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endfor %}

{% if username %}
<h1>{{username}}</h1>
{% else %}
<h1>USer List:</h1>

<form method="POST" class="my-4">
    {{ form.csrf_token }}
    <div class="form-group">
        {{ form.username.label(class="mb-2") }}
        {{ form.username(class="form-control", placeholder="Username") }}
    </div>
    <div class="form-group">
        {{ form.email.label(class="mb-2") }}
        {{ form.email(class="form-control", placeholder="Email") }}
    </div>
    <div class="form-group">
        {{ form.migration_test.label(class="mb-2") }}
        {{ form.migration_test(class="form-control", placeholder="migration_test") }}
    </div>
    <br/>
    <div class="form-group">
        {{ form.password.label(class="mb-2") }}
        {{ form.password(class="form-control", placeholder="password") }}
    </div>
    <br/>
    <div class="form-group">
        {{ form.password2.label(class="mb-2") }}
        {{ form.password2(class="form-control", placeholder="Confirm Password") }}
    </div>
    <br/>
    <input type="submit" value="Submit" class="btn btn-primary">
</form>
{% for user in users %}
    <div>
        <span>{{user.id}} - </span>
        <span> <a href={{url_for('update_user', id=user.id)}}>{{user.username}}</a> - </span>
        <span>{{user.email}} - </span>
        <span>{{user.migration_test}}</span>
        <span><button><a href={{ url_for('delete_user', id=user.id)}}>Delete</a></button></span>
    </div>
{% endfor %}

{% endif %}
{% endblock %}
